<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Fetcher Browser</title>
<style>
body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #0b1220;
    color: white;
    overflow-x: hidden;
    display: flex;
    min-height: 100vh;
    flex-direction: column;
    transition: background 0.5s, color 0.5s;
}

/* HISTORY PANEL */
#historyPanel {
    width: 250px;
    background: #1e293b;
    border-left: 2px solid #2563eb;
    padding: 10px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -260px;
    height: 100%;
    transition: right 0.4s ease;
    z-index: 1000;
}
#historyPanel.open { right: 0; }
#historyPanel strong { margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
.history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px;
    cursor: pointer;
    border-bottom: 1px solid #2563eb;
    transition: background 0.3s, transform 0.3s;
}
.history-item:hover { background: #2563eb; transform: scale(1.02); }
.history-item button {
    background: red;
    border: none;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-left: 10px;
    border-radius: 50%;
    width: 20px;
    height: 20px;
}

/* MAIN CONTENT */
#mainContent { flex: 1; display: flex; flex-direction: column; }

/* HEADER */
header {
    background: #1b1b1c;
    color: white;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.5);
}
header h1 { margin: 0; font-size: 22px; }
header button { margin-left: auto; padding: 6px 10px; border-radius: 6px; border: none; cursor: pointer; transition: transform 0.3s; }
header button:hover { transform: rotate(360deg); }

/* TOOLBAR */
.toolbar {
    display: flex;
    gap: 10px;
    background: #1b1b1c;
    padding: 10px;
    align-items: center;
    flex-wrap: wrap;
}
.toolbar button, .toolbar input { transition: all 0.3s ease; }
.toolbar button {
    background: #2563eb;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
}
.toolbar button:hover { transform: scale(1.1); box-shadow: 0 0 8px #2563eb; }
.toolbar input { flex: 1; padding: 8px 10px; border-radius: 6px; border: none; font-size: 15px; outline: none; }

/* HOME PAGE */
#homePage {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 20px;
    gap: 20px;
    overflow-y: auto;
}
.home-search {
    display: flex;
    width: 60%;
    max-width: 600px;
    background: #dddee0;
    border-radius: 40px;
    padding: 10px;
}
.home-search input { flex: 1; background: transparent; border: none; color: black; font-size: 18px; outline: none; padding-left: 15px; }
.home-search button { background: transparent; border: none; color: black; font-size: 20px; cursor: pointer; }

/* DAILY TOPICS */
#dailyTopicsContainer, #dailyNewsContainer { width: 80%; max-width: 800px; }
#dailyTopics { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
.topicCard, .newsCard { background: #1e293b; border-radius: 10px; cursor: pointer; overflow: hidden; display: flex; flex-direction: column; transition: transform 0.3s, box-shadow 0.3s; }
.topicCard:hover, .newsCard:hover { transform: scale(1.05); box-shadow: 0 0 10px #2563eb; }
.topicCard img { width: 100%; height: 100px; object-fit: cover; }
.topicTitle, .newsTitle { padding: 8px; text-align: center; font-weight: bold; color: white; font-size: 14px; }
.newsSource { font-size: 12px; color: #a0a0a0; padding: 0 8px 8px; text-align: center; }

/* QUICK LINKS */
.quick-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 20px; width: 60%; max-width: 700px; }
.quick-links div { background: #2563eb; color: white; padding: 20px; text-align: center; border-radius: 12px; cursor: pointer; }
.quick-links div:hover { transform: scale(1.1); }

/* RESULTS */
#results div { cursor:pointer; padding:5px; background:#2563eb; margin-bottom:3px; border-radius:5px; }
#results div:hover { transform: scale(1.05); }

/* IFRAME */
iframe { width: 100%; height: calc(100vh - 120px); border: none; background: white; }

/* VIDEO BACKGROUND */
#bgVideo { position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; opacity: 0.4; }

/* FOOTER */
footer { position: fixed; bottom: 0; width: 100%; background: #020617; color: white; text-align: center; padding: 6px; }

/* TABS */
#tabs button { padding: 6px 12px; margin-right: 4px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; }
#tabs button:hover { transform: scale(1.1); }
</style>
</head>
<body>

<!-- HISTORY PANEL -->
<div id="historyPanel"><strong>History:</strong></div>

<!-- MAIN CONTENT -->
<div id="mainContent">

<header>
  <h1>  <button onclick="toggleTheme()">üåì</button>Fetcher Browser</h1>
  <button onclick="toggleHistory()">üìú</button>
</header>

<div class="toolbar">
  <button id="backBtn" onclick="goBack()" disabled>‚Üê</button>
  <button id="forwardBtn" onclick="goForward()" disabled>‚Üí</button>
  <button onclick="reloadPage()">‚ü≥</button>
  <button onclick="goHome()">üè†</button>
  <input type="text" id="urlInput" placeholder="Enter website URL" />
  <button onclick="loadSite()">Go</button>
  <input type="text" id="searchInput" placeholder="Search web" />
  <button onclick="searchWeb()">Search</button>
  <button onclick="addBookmark()">‚≠ê</button>
</div>

<div id="tabs"></div>

<video id="bgVideo" autoplay muted loop playsinline>
    <source src="https://www.w3schools.com/howto/rain.mp4" type="video/mp4">
</video>

<div id="homePage">
  <div class="home-search">
    <input type="text" id="homeSearch" placeholder="Search (real-time)" oninput="liveSearch(this.value)" />
  </div>
  <div id="results"></div>

  <!-- DAILY TOPICS -->
  <div id="dailyTopicsContainer">
    <h3>Daily Topics</h3>
    <div id="dailyTopics"></div>
  </div>

  <!-- DAILY NEWS -->
  <div id="dailyNewsContainer">
    <h3>Daily News Updates</h3>
    <div id="dailyNews"></div>
  </div>

  <div class="quick-links">
    <div onclick="openQuick('https://chat.openai.com')">ChatGPT</div>
    <div onclick="openQuick('https://www.youtube.com')">YouTube</div>
    <div onclick="openQuick('https://www.google.com')">Google</div>
    <div onclick="openQuick('https://github.com')">GitHub</div>
    <div onclick="openQuick('https://www.wikipedia.org')">Wikipedia</div>
  </div>
</div>

<iframe id="browserFrame" hidden></iframe>
<footer>¬© 2025 Fetch Browser | Developed by Nithin Kumar Reddy!</footer>

<script>
// THEME
let dark = true;
function toggleTheme() {
    dark = !dark;
    document.body.style.background = dark ? '#0b1220' : '#f1f5f9';
    document.body.style.color = dark ? 'white' : 'black';
}

// HISTORY TOGGLE
let historyOpen = false;
function toggleHistory() {
    historyOpen = !historyOpen;
    document.getElementById('historyPanel').classList.toggle('open');
}

// ELEMENTS
const frame = document.getElementById('browserFrame');
const homePage = document.getElementById('homePage');
const resultsBox = document.getElementById('results');
const historyPanel = document.getElementById('historyPanel');
const urlInput = document.getElementById('urlInput');
const searchInput = document.getElementById('searchInput');
const backBtn = document.getElementById('backBtn');
const forwardBtn = document.getElementById('forwardBtn');
const tabsBar = document.getElementById('tabs');
const dailyTopicsContainer = document.getElementById('dailyTopics');

// STATE
let tabs = [];
let activeTab = -1;

// TABS & NAVIGATION
function newTab(url='') {
    if(tabs.length===0) url=''; else if(!url) url='https://www.wikipedia.org';
    tabs.push({ history: url? [url]:[], index: url?0:-1, bookmarks:[], allHistory:[] });
    activeTab = tabs.length-1;
    renderTabs();
    if(url) navigate(url,true); else showHome();
}
function renderTabs() {
    tabsBar.innerHTML='';
    tabs.forEach((t,i)=>{
        const b=document.createElement('button');
        b.textContent='Tab '+(i+1)+(i===0?' (Home)':'');
        b.onclick=()=>switchTab(i);
        tabsBar.appendChild(b);
    });
}
function switchTab(i){
    activeTab=i;
    if(i===0) showHome();
    else{
        const t=tabs[i];
        homePage.style.display='none';
        frame.hidden=false;
        frame.src=t.history[t.index];
        updateButtons();
    }
    renderHistory();
}
function updateButtons(){
    const t=tabs[activeTab];
    backBtn.disabled=!t.history||t.index<=0;
    forwardBtn.disabled=!t.history||t.index>=t.history.length-1;
}
async function navigate(url, skip){
    if(!url) return;
    const openInNewTab = ['youtube.com','google.com','accounts.google.com','bank'];
    if(openInNewTab.find(s=>url.includes(s))){ window.open(url,'_blank'); return; }
    homePage.style.display='none';
    frame.hidden=false;
    frame.style.opacity=0;
    const t=tabs[activeTab];
    if(!skip){ t.history.splice(t.index+1); t.history.push(url); t.index++; }
    t.allHistory.push(url);
    renderHistory();
    frame.src=url;
    setTimeout(()=>frame.style.opacity=1,100);
    updateButtons();
}

// HISTORY
function renderHistory(){
    if(!tabs[activeTab].allHistory) return;
    historyPanel.innerHTML = "<strong>History:</strong>";
    tabs[activeTab].allHistory.forEach((u, idx) => {
        const div = document.createElement('div');
        div.className = 'history-item';

        const span = document.createElement('span');
        span.textContent = u;
        span.style.flex = '1';
        span.onclick = () => navigate(u, true);

        const closeBtn = document.createElement('button');
        closeBtn.textContent = '√ó';
        closeBtn.onclick = (e) => {
            e.stopPropagation();
            tabs[activeTab].allHistory.splice(idx, 1);
            renderHistory();
        };

        div.appendChild(span);
        div.appendChild(closeBtn);
        historyPanel.appendChild(div);
    });
}

// HOME
function showHome(){ frame.hidden=true; homePage.style.display='flex'; renderHistory(); }

// URL & SEARCH
function loadSite(){ let u=urlInput.value.trim(); if(!u)return; if(!/^https?:/i.test(u)) u='https://'+u; navigate(u); }
function searchWeb(){ const q=searchInput.value.trim(); if(!q)return; navigate('https://duckduckgo.com/?q='+encodeURIComponent(q)); }

// NAVIGATION BUTTONS
function reloadPage(){ const t=tabs[activeTab]; if(t.history&&t.index>=0) frame.src=t.history[t.index]; }
function goBack(){ const t=tabs[activeTab]; if(t.history&&t.index>0){ t.index--; frame.src=t.history[t.index]; updateButtons(); } }
function goForward(){ const t=tabs[activeTab]; if(t.history&&t.index<t.history.length-1){ t.index++; frame.src=t.history[t.index]; updateButtons(); } }
function goHome(){ switchTab(0); }

// BOOKMARKS
function addBookmark(){ const t=tabs[activeTab]; if(t.history && t.index>=0) t.bookmarks.push(t.history[t.index]); alert('Bookmarked!'); }

// QUICK LINKS
function openQuick(url){ const openInNewTab=['youtube.com','google.com','accounts.google.com','bank'].find(s=>url.includes(s)); if(openInNewTab) window.open(url,'_blank'); else navigate(url); }

// LIVE SEARCH
async function liveSearch(q){
    resultsBox.innerHTML='';
    if(q.length<2) return;
    try{
        const r = await fetch(`https://en.wikipedia.org/w/rest.php/v1/search/title?q=${q}&limit=5`);
        const d = await r.json();
        d.pages.forEach(p=>{
            const div=document.createElement('div');
            div.textContent=p.title;
            div.onclick=()=>navigate('https://en.wikipedia.org/wiki/'+encodeURIComponent(p.title));
            resultsBox.appendChild(div);
        });
    }catch{ resultsBox.textContent='Search unavailable'; }
}
// DAILY NEWS
async function loadDailyNews() {
    const container = document.getElementById('dailyNews');
    container.innerHTML = '';
    try {
        const rssUrl = encodeURIComponent('http://feeds.bbci.co.uk/news/rss.xml');
        const res = await fetch(`https://api.allorigins.win/get?url=${rssUrl}`);
        const data = await res.json();
        const parser = new DOMParser();
        const xml = parser.parseFromString(data.contents, "application/xml");
        const items = xml.querySelectorAll("item");

        items.forEach((item, idx) => {
            if(idx >= 5) return;
            const title = item.querySelector("title").textContent;
            const link = item.querySelector("link").textContent;

            const card = document.createElement('div');
            card.className = 'newsCard';
            card.onclick = () => window.open(link, '_blank');

            const newsTitle = document.createElement('div');
            newsTitle.className = 'newsTitle';
            newsTitle.textContent = title;

            card.appendChild(newsTitle);
            container.appendChild(card);
        });
    } catch (err) {
        container.innerHTML = '<p style="color:white;">Failed to load news updates.</p>';
        console.error(err);
    }
}

// IFRAME ERROR
frame.onerror=()=>{ alert("This site cannot be displayed in the iframe. Opening in a new tab."); window.open(frame.src,'_blank'); showHome(); }

// INIT
newTab();
loadDailyNews();
</script>
</body>
</html>
